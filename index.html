<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Programme Escalade ‚Äî App</title>
<link rel="manifest" href="manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Escalade Trainer">
<link rel="apple-touch-icon" href="icon-192.png">

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

:root {
  color-scheme: dark;
}

body {
  font-family: 'Inter', sans-serif;
  margin: 0;
  padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  background: linear-gradient(145deg, #0f172a, #1e293b);
  color: #f8fafc;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
}

h1 {
  text-align: center;
  font-weight: 700;
  font-size: 1.8em;
  margin: 1em 0 0.5em;
  color: #a5b4fc;
}

h2 {
  font-size: 1.2em;
  color: #c7d2fe;
  margin-bottom: 0.6em;
}

.card {
  width: 90%;
  max-width: 500px;
  background: rgba(15, 23, 42, 0.85);
  border: 1px solid rgba(99, 102, 241, 0.25);
  border-radius: 14px;
  margin: 12px 0;
  padding: 18px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.35);
  backdrop-filter: blur(10px);
  transition: transform 0.25s ease, background 0.25s ease;
}
.card:hover {
  transform: translateY(-3px);
  background: rgba(30, 41, 59, 0.95);
}

button {
  padding: 6px 12px;
  margin: 4px;
  border: none;
  border-radius: 8px;
  background: linear-gradient(90deg, #6366f1, #8b5cf6);
  color: #fff;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.15s ease, opacity 0.15s ease;
}
button:hover { transform: scale(1.05); opacity: 0.9; }
button:active { transform: scale(0.95); }
.reset-btn { background: linear-gradient(90deg, #ef4444, #f87171); }

ul { margin: 0; padding-left: 18px; }

.day {
  background: rgba(255,255,255,0.05);
  border-radius: 8px;
  padding: 10px 12px;
  margin: 6px 0;
  cursor: pointer;
  transition: background 0.3s ease;
}
.day:hover { background: rgba(99,102,241,0.15); }

.day h3 {
  margin: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: 600;
}

.day-details {
  max-height: 0;
  overflow: hidden;
  transition: all 0.5s cubic-bezier(.25,.8,.25,1);
  opacity: 0;
}
.day-details.open {
  opacity: 1;
  max-height: 300px;
  margin-top: 10px;
}

#timer_display {
  font-size: 2em;
  font-weight: bold;
  color: #a5b4fc;
}

footer {
  margin-top: auto;
  padding: 12px;
  opacity: 0.6;
  font-size: 0.9em;
}
.progress-bar {
  height: 12px;
  background: rgba(99,102,241,0.2);
  border-radius: 6px;
  overflow: hidden;
  margin-top: 6px;
}
.progress-inner {
  height: 100%;
  background: linear-gradient(90deg, #6366f1, #8b5cf6);
  width: 0%;
  border-radius: 6px;
  transition: width 0.6s ease-in-out;
}
.streak {
  font-size: 1.4em;
  font-weight: 700;
  color: #facc15;
}
</style>
</head>
<body>
<h1>üèîÔ∏è Programme Escalade & Musculation</h1>

<!-- üìÜ CALENDRIER INTERACTIF -->
<div class="card" id="calendar_card">
  <h2>üóìÔ∏è Calendrier hebdomadaire</h2>
  <div id="calendar"></div>
</div>

<!-- üî• SEANCE DU JOUR -->
<div class="card" id="today_card">
  <h2>üí™ S√©ance du jour</h2>
  <ul id="today_list"></ul>
</div>

<!-- üìà PROGRESSION MENSUELLE -->
<div class="card">
  <h2>üìä Progression mensuelle</h2>
  <p id="progress_percent">0%</p>
  <div class="progress-bar"><div class="progress-inner" id="progress_inner"></div></div>
</div>

<!-- üî• STREAK -->
<div class="card">
  <h2>üî• Streak</h2>
  <p id="streak_display" class="streak">0 jours</p>
</div>

<!-- ‚è±Ô∏è MINUTEUR -->
<div class="card">
  <h2>‚è±Ô∏è Minuteur global</h2>
  <p><span id="timer_display">00:00</span></p>
  <button onclick="startTimer()">‚ñ∂ Start</button>
  <button onclick="stopTimer()">‚è∏ Stop</button>
  <button onclick="resetTimer()" class="reset-btn">üîÅ Reset</button>
</div>

<footer>¬© 2025 L√©o EGGENSCHWILLER ‚Ä¢ Stay Strong üí•</footer>

<script>
// --- PROGRAMME ---
const programme = {
  Lundi: { title: "Pouss√©e + Core", ex: ["Pompes classiques ‚Äî 3√ó10", "Planche ‚Äî 3√ó40s", "Dips ‚Äî 3√ó8"] },
  Mardi: { title: "Tirage + Grip", ex: ["Tractions ‚Äî 3√ó8", "Suspension sur poutre ‚Äî 3√ó20s", "Rowing invers√© ‚Äî 3√ó10"] },
  Mercredi: { title: "Jambes + Explosivit√©", ex: ["Squats saut√©s ‚Äî 3√ó12", "Fentes ‚Äî 3√ó10", "Mont√©es de genoux ‚Äî 3√ó30s"] },
  Jeudi: { title: "Haut du corps + Doigts", ex: ["Pompes serr√©es ‚Äî 3√ó10", "Suspension 3 doigts ‚Äî 4√ó10s", "Gainage lat√©ral ‚Äî 3√ó30s"] },
  Vendredi: { title: "Tirage + Core", ex: ["Tractions australiennes ‚Äî 3√ó10", "Crunchs ‚Äî 3√ó20", "Planche lat√©rale ‚Äî 3√ó30s"] },
  Samedi: { title: "Repos actif", ex: ["√âtirements", "Mobilit√©", "Yoga doux"] },
  Dimanche: { title: "Repos total", ex: ["Hydratation", "Pr√©paration semaine", "Sieste üò¥"] }
};

// --- CALENDRIER INTERACTIF ---
const calendar = document.getElementById('calendar');
for (const [day, data] of Object.entries(programme)) {
  const d = document.createElement('div');
  d.className = 'day';
  d.innerHTML = `<h3>${day} <span style="font-size:.9em;opacity:.7;">${data.title}</span></h3>
    <div class="day-details"><ul>${data.ex.map(e=>`<li>${e}</li>`).join('')}</ul></div>`;
  calendar.appendChild(d);
}
const days = document.querySelectorAll('.day');
days.forEach(day=>{
  day.addEventListener('click',()=>{
    const details = day.querySelector('.day-details');
    const open = details.classList.contains('open');
    document.querySelectorAll('.day-details').forEach(d=>d.classList.remove('open'));
    if(!open) details.classList.add('open');
  });
});

// --- SEANCE DU JOUR ---
const todayName = new Date().toLocaleDateString('fr-FR', { weekday: 'long' });
const capitalized = todayName.charAt(0).toUpperCase() + todayName.slice(1);
const todayData = programme[capitalized];
if (todayData) {
  document.getElementById('today_list').innerHTML = todayData.ex.map(e=>`<li>${e}</li>`).join('');
}

// --- STREAK ---
let streak = parseInt(localStorage.getItem('streak')||'0');
let lastDay = localStorage.getItem('lastDay');
const today = new Date().toDateString();
if (lastDay !== today) {
  const yesterday = new Date(); yesterday.setDate(yesterday.getDate()-1);
  if (lastDay === yesterday.toDateString()) streak++; else streak = 1;
  localStorage.setItem('streak', streak);
  localStorage.setItem('lastDay', today);
}
document.getElementById('streak_display').textContent = `${streak} jour${streak>1?'s':''}`;

// --- PROGRESSION MENSUELLE ---
const now = new Date();
const monthProgress = Math.round((now.getDate()/new Date(now.getFullYear(), now.getMonth()+1, 0).getDate())*100);
document.getElementById('progress_percent').textContent = monthProgress+"%";
document.getElementById('progress_inner').style.width = monthProgress+"%";

// --- MINUTEUR ---
let timerInterval;
let timerSeconds = parseInt(localStorage.getItem('timerSeconds')||'0');
const display = document.getElementById('timer_display');
function updateDisplay(){
  let m=Math.floor(timerSeconds/60), s=timerSeconds%60;
  display.textContent=`${m<10?'0':''}${m}:${s<10?'0':''}${s}`;
}
updateDisplay();
function startTimer(){
  if(timerInterval) return;
  timerInterval=setInterval(()=>{
    timerSeconds++;
    localStorage.setItem('timerSeconds',timerSeconds);
    updateDisplay();
  },1000);
}
function stopTimer(){
  clearInterval(timerInterval);
  timerInterval=null;
}
function resetTimer(){
  timerSeconds=0;
  updateDisplay();
  localStorage.removeItem('timerSeconds');
}
</script>
</body>
</html>
